<!DOCTYPE html>
<!--main file. backuip copy is still being regularly updated/used as a testing file-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EHelp</title> <!--webapp name/tab name-->
    <link rel="stylesheet" href="../css/styles.css"> <!--css directory path-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.js"></script> <!-- importing -->
</head>

<body>
    <div id="app"> <!-- APP STRUCTURE-->
        <h1>{{ sitename }}</h1> <!-- webapp name -->

        <!-- Search Functionality -->
        <input type="text" v-model="searchQuery" @input="performSearch" placeholder="Search for lessons...">
        <!-- SEARCH INPUT -->
        <div id="sorting"> <!--sorting items-->
            <button v-on:click="sortPrice">Sort by price</button> <!-- sort by price button -->
            <button v-on:click="sortSpaces">Sort by spaces</button> <!-- sort by spaces button --> 
            <button v-on:click="sortAlphabetical">Sort by alphabetical order</button> <!-- sort by alphabetical order button -->
        </div>
        <div id="products"> <!--items for sale (lessons to book)-->
            <div v-for="lesson in displayedLessons" :key="lesson.id"> <!-- div-creation for each arrays below: -->
                <br>
                <img :src="lesson.image" alt="lesson image"> <!-- LESSON IMAGE (moved this above the metadata) -->
                <h2>{{ lesson.subject }}</h2> <!-- display lesson subject -->
                <p>{{ lesson.location }}</p> <!-- display lesson location -->
                <p>price: £{{ lesson.price }}</p> <!-- LESSON COST -->
                <p>spaces: {{ lesson.spaces }}</p> <!-- STOCK/HOW MANY LESSONS AVAILABLE -->
                <button v-on:click="addToCart(lesson)" :disabled="lesson.spaces === 0">add to cart</button>
                <!--ADD ALREADY-SHOWN ITEMS TO CART-->
                <!-- add to cart button -->
            </div>
        </div>

        <h2>shopping cart</h2>
        <ul>
            <li v-for="(product, index) in cart" :key="index">
                {{ product.subject }} - £{{ product.price }} <!-- display product name and price -->
                <div class="quantity-controls"> <!-- quantity controls -->
                    <button v-on:click="increaseQuantity(index)">+</button> <!-- button to increase quantity -->
                    <span>{{ product.quantity }}</span> <!-- display quantity -->
                    <button v-on:click="decreaseQuantity(index)">-</button> <!-- button to decrease quantity -->
                </div>
                Subtotal: £{{ product.price * product.quantity }} <!-- display subtotal -->
                <img :src="product.image" alt="product image"><!-- loop through cart items -->
                <button v-on:click="removeProduct(index)">x</button> <!-- button to remove product -->
            </li>
        </ul>
        <p>total items in cart: {{ totalCartItems }}</p> <!-- display total items in cart -->
        <p>Total price: £{{ totalPrice }}</p> <!-- display total price of items in cart -->
    </div>
    <script src="../javascript/script.js"></script> <!-- importing -->
</body>

</html>